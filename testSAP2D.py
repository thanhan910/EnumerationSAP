import unittest
import logging

from Enting1980 import G, g, enumerate_saps

OEIS_A002931 = [
    0,
    0,
    1,
    2,
    7,
    28,
    124,
    588,
    2938,
    15268,
    81826,
    449572,
    2521270,
    14385376,
    83290424,
    488384528,
    2895432660,
    17332874364,
    104653427012,
    636737003384,
    3900770002646,
    24045500114388,
    149059814328236,
    928782423033008,
    5814401613289290,
    36556766640745936,
    230757492737449636,
    1461972662850874916,
    9293993428791901042,
    59270905595010696944,
    379108737793289505364,
    2431560774079622817356,
    15636142410456687798584,
    100792521026456246096640,
    651206027727607425003232,
    4216407618470423070733556,
    27355731801639756123505014,
    177822806050324126648352460,
    1158018792676190545425711414,
    7554259214694896127239818088,
    49360379260931646965916677280,
    323028185951187646733521902740,
    2117118644744425875029583096670,
    13895130612692826326409919713700,
    91319729650588816198004801698400,
    600931442757555468862970353941700,
    3959306049439766117380237943449096,
    26117050944268596220897591868398452,
    172472018113289556124895798382016316,
    1140203722938033441542255979068861816,
    7545649677448506970646886033356862162,
    49985425311177130573540712929060556804,
    331440783010043009106782321492277936522,
    2199725502650970871182263620080571090156,
    14612216410979678692651320184958285074180,
    97148177367657853074723038687712338567772,
    646414111975777272517734370762400697757978,
    4304591798055577073477026735313861700713176,
    28687064652813390269800415016181829385121162,
    191320663411431818964849556990106874938907548,
    1276875276296096391140817393830149918943464494,
    8527773411790633004325737459634720668141188468,
    56991966408991589554333823232058663722205631080,
    381130017241685467740337492217602004487643160168,
    2550382601811089051031712642200910692143744745034,
    17076613429289025223970687974244417384681143572320,
]


class TestSAP2D(unittest.TestCase):
    def test_enumerate_saps_small(self):
        # for length in range(4, len(OEIS_A002931) * 2, 2):
        for length in range(4, 14, 2):
            with self.subTest(length=length):
                ans = enumerate_saps(length)
                expected_ans = (
                    0 if (length <= 3 or length % 2 != 0) else OEIS_A002931[length // 2]
                )
                self.assertEqual(
                    first=ans,
                    second=expected_ans,
                    msg=f"length={length}, expected_ans={expected_ans}, ans={ans}",
                )

if __name__ == "__main__":
    unittest.main()
